## ä¸‰å±‚æ¶æ„ç”¨åˆ°çš„æ³¨è§£æ€»ç»“

---

### ğŸ— ä¸‰å±‚æ¶æ„ + æ³¨è§£ç¤ºæ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Controller å±‚            â”‚
â”‚  - æ¥æ”¶è¯·æ±‚ï¼Œè¿”å›å“åº”(JSON)         â”‚
â”‚                                    â”‚
â”‚  @RestController                   â”‚
â”‚  @RequestMapping("/users")          â”‚
â”‚   â”œâ”€ @GetMapping("/{id}")           â”‚
â”‚   â”‚    @PathVariable Long id        â”‚
â”‚   â”œâ”€ @PostMapping                   â”‚
â”‚   â”‚    @RequestBody UserDTO dto     â”‚
â”‚   â””â”€ @CrossOrigin                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ è°ƒç”¨ Service
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Service å±‚              â”‚
â”‚  - ä¸šåŠ¡é€»è¾‘ï¼Œäº‹åŠ¡æ§åˆ¶                â”‚
â”‚                                    â”‚
â”‚  @Service                          â”‚
â”‚  @Transactional                    â”‚
â”‚   â”œâ”€ è°ƒç”¨ DAO å±‚                    â”‚
â”‚   â”œâ”€ å°è£…ä¸šåŠ¡è§„åˆ™                   â”‚
â”‚   â””â”€ ç»„åˆå¤šä¸ªæ•°æ®æ“ä½œ                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ è°ƒç”¨ DAO
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DAO / Mapper å±‚           â”‚
â”‚  - æ“ä½œæ•°æ®åº“                        â”‚
â”‚                                    â”‚
â”‚  MyBatis:                          â”‚
â”‚   @Mapper / @Repository             â”‚
â”‚   @Select("SELECT * FROM user")     â”‚
â”‚   @Param("id") Long id              â”‚
â”‚                                    â”‚
â”‚  JPA:                              â”‚
â”‚   @Repository                       â”‚
â”‚   @Entity @Table(name="user")       â”‚
â”‚   @Id @GeneratedValue               â”‚
â”‚   @Column(name="username")          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

### âœ… ä¸€å¥è¯æ€»ç»“

- **Controller å±‚**ï¼šè´Ÿè´£ **è¯·æ±‚/å“åº”**ï¼ˆ`@RestController`ã€`@RequestMapping`ã€`@RequestBody`ã€`@PathVariable`ï¼‰
- **Service å±‚**ï¼šè´Ÿè´£ **ä¸šåŠ¡é€»è¾‘å’Œäº‹åŠ¡**ï¼ˆ`@Service`ã€`@Transactional`ï¼‰
- **DAO å±‚**ï¼šè´Ÿè´£ **æ•°æ®åº“æ“ä½œ**ï¼ˆMyBatisï¼š`@Mapper`ã€`@Select`ï¼›JPAï¼š`@Repository`ã€`@Entity`ï¼‰

---

ä¸‰å±‚æ¶æ„ï¼ˆController â†’ Service â†’ DAO/Mapperï¼‰åœ¨ **Spring Boot + MyBatis/JPA** é¡¹ç›®é‡Œï¼Œå¸¸ç”¨çš„æ³¨è§£å¯ä»¥åˆ†å±‚æ€»ç»“å¦‚ä¸‹ï¼š

---

### ğŸŒ Controller å±‚ï¼ˆè¡¨ç°å±‚ / Web å±‚ï¼‰

ä¸»è¦è´Ÿè´£æ¥æ”¶è¯·æ±‚ã€å‚æ•°æ ¡éªŒã€è¿”å›å“åº”ã€‚

-  **@RestController**
  \= @Controller + @ResponseBodyï¼Œè¿”å› JSON æ•°æ®ã€‚
-  **@Controller**
  ä¼ ç»Ÿ MVC æ§åˆ¶å™¨ï¼Œè¿”å›é¡µé¢æˆ– JSONã€‚
- **@RequestMapping**
  å®šä¹‰ç±»æˆ–æ–¹æ³•çš„è¯·æ±‚è·¯å¾„ï¼Œå¯ç»†åŒ–ä¸ºï¼š

  -  **@GetMapping** /  **@PostMapping** /  **@PutMapping** /  **@DeleteMapping**
-  **@RequestParam**
  ç»‘å®š URL æŸ¥è¯¢å‚æ•°ï¼Œå¦‚ `?id=1`ã€‚
-  **@PathVariable**
  ç»‘å®šè·¯å¾„å‚æ•°ï¼Œå¦‚ `/user/{id}`ã€‚
-  **@RequestBody**
  æ¥æ”¶ JSON æ ¼å¼è¯·æ±‚ä½“å¹¶è½¬æ¢ä¸ºå¯¹è±¡ã€‚
-  **@ResponseBody**
  å°†è¿”å›å€¼åºåˆ—åŒ–ä¸º JSONï¼ˆé€šå¸¸ç”¨ @RestController æ›¿ä»£ï¼‰ã€‚
-  **@CrossOrigin**
  è§£å†³è·¨åŸŸè¯·æ±‚é—®é¢˜ã€‚
-  **@Validated** /  **@Valid**
  å‚æ•°æ ¡éªŒï¼ˆé…åˆ Bean Validation æ³¨è§£å¦‚ @NotNullã€@Sizeï¼‰ã€‚

---

### âš™ï¸ Service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰

è´Ÿè´£ä¸šåŠ¡é€»è¾‘ç¼–æ’ã€äº‹åŠ¡æ§åˆ¶ã€‚

-  **@Service**
  æ ‡è¯†ä¸šåŠ¡é€»è¾‘ç»„ä»¶ï¼Œæ³¨å†Œåˆ° Spring å®¹å™¨ã€‚
-  **@Autowired** /  **@Resource** /  **@Inject**
  ä¾èµ–æ³¨å…¥ï¼ˆå¸¸ç”¨åœ¨æ³¨å…¥ DAO æˆ–å…¶ä»– Serviceï¼‰ã€‚
- **@Transactional**
  å£°æ˜å¼äº‹åŠ¡æ§åˆ¶ï¼Œå¯é…ç½®ï¼š

  - rollbackFor \= Exception.classï¼ˆé‡åˆ°å—æ£€å¼‚å¸¸ä¹Ÿå›æ»šï¼‰
  - propagationï¼ˆäº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼‰
-  **@Value**
  æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§å€¼ã€‚

---

### ğŸ—„ DAO/Mapper å±‚ï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰

ç›´æ¥æ“ä½œæ•°æ®åº“ã€‚

#### å¦‚æœç”¨ MyBatisï¼š

-  **@Mapper**
  æ ‡è¯† MyBatis çš„ Mapper æ¥å£ã€‚
-  **@Repository**
  å¯é€‰ï¼Œæ ‡è¯†æŒä¹…å±‚ç»„ä»¶ã€‚
-  **@Select** /  **@Insert** /  **@Update** /  **@Delete**
  å†™åœ¨æ¥å£æ–¹æ³•ä¸Šçš„ SQL æ³¨è§£ã€‚
-  **@Results** /  **@Result**
  å­—æ®µå’Œå±æ€§æ˜ å°„ã€‚
-  **@Param**
  ç»™æ–¹æ³•å‚æ•°å‘½åï¼Œä¾¿äº SQL å ä½ç¬¦å¼•ç”¨ã€‚

#### å¦‚æœç”¨ Spring Data JPAï¼š

-  **@Repository**
  æ ‡è¯†æŒä¹…å±‚ã€‚
-  **@Query**
  è‡ªå®šä¹‰ JPQL/SQL æŸ¥è¯¢ã€‚
-  **@Modifying**
  é…åˆ @Query åšæ›´æ–°/åˆ é™¤æ“ä½œã€‚
-  **@Entity**
  æ ‡è¯†ä¸€ä¸ªæŒä¹…åŒ–å¯¹è±¡ï¼ˆè¡¨å¯¹åº”çš„å®ä½“ç±»ï¼‰ã€‚
-  **@Table**
  æŒ‡å®šè¡¨åã€‚
-  **@Id**
  ä¸»é”®ã€‚
-  **@GeneratedValue**
  ä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚
-  **@Column**
  æŒ‡å®šå­—æ®µåã€‚

---

### âœ… æ€»ç»“ï¼ˆå¸¸è§ç»„åˆï¼‰

- Controllerï¼š`@RestController + @RequestMapping + @RequestBody/@PathVariable`
- Serviceï¼š`@Service + @Transactional`
- DAOï¼š`@Mapper/@Repository + @Select/@Insert...`

è¿™æ ·åˆ†å±‚ä¹‹åï¼Œä¸‰å±‚æ¶æ„çš„èŒè´£æ¸…æ™°ï¼š

- **Controller åªç®¡è¯·æ±‚/å“åº”**
- **Service ç®¡é€»è¾‘å’Œäº‹åŠ¡**
- **DAO/Mapper ç®¡æ•°æ®åº“**

---